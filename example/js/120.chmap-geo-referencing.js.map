{"version":3,"file":"120.chmap-geo-referencing.js","mappings":"4ZAGA,IAAQA,EAAsBC,EAAAA,UAAAA,kBAEtBC,EAAUC,EAAAA,cAAAA,MAEZC,EAAiB,WAEnB,IAAIC,EAAQ,KAIZ,SAASC,IAEL,IAwBMC,EAAMC,SAASC,cAAc,OAEnCF,EAAIG,UAAY,aAChBH,EAAII,UA3BM,k9BA6BVH,SAASI,KAAKC,OAAON,GAErBA,EAAIO,cAAc,eAAeC,QAAUC,EAQ/C,SAA2BT,GAEvB,IAF4B,I,w4BAAA,CAEZA,EAAIU,iBAAiB,kBAFT,IAI5B,2BAA4B,KAAjBC,EAAiB,QAExBA,EAAKC,KAAOnB,EAAoBkB,EAAKE,GACrCF,EAAKG,OAAS,UAPU,+BAN5BC,CAAkBf,GAElBF,EAAQH,EAAMqB,oBAAoBhB,GA3CR,SA2DfS,IA3De,uEA2D9B,8FAEoC,8BAFpC,QAEYQ,EAFZ,OAEYA,eAEMnB,EAAMoB,SAASX,cAAc,2BAJ/C,4CA3D8B,sBAuF9B,MAAO,CACHY,KArBJ,SAAcC,GAELtB,GACDC,IAKJD,EAAMqB,QAcNE,KAVJ,WAEQvB,GACAA,EAAMuB,SAlFK","sources":["webpack://chmapGeoReferencing/./src/js/file-import/local-file-modal.js"],"sourcesContent":["\nimport { Constants, BootstrapWrap } from '@chmap/utilities';\n\nconst { EXAMPLE_FILES_DIR } = Constants;\n\nconst { Modal } = BootstrapWrap;\n\nconst LocalFileModal = function() {\n\n    let modal = null;\n\n    let gCallback = null\n\n    function creat() {\n\n        const html =\n`<div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\">Import local IIIF manifest file</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"mb-3 local-data-file-input\">\n            <label class=\"form-label\" for=\"localIIIFManifestFile\">*Local file</label>\n            <input type=\"file\" id=\"localIIIFManifestFile\">\n        </div>\n        <br>\n        <pre>\nGeoreferencing only supports one format:\nIIIF manifest.json (<a id=\"iiif-general-images.json\" class=\"example-file\" href=\"#\" download>example-images</a>, <a id=\"iiif-map-images.json\" class=\"example-file\" href=\"#\" download>example-maps</a>)\n        </pre>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-primary import-btn\">Import</button>\n      </div>\n    </div>\n </div>`;\n\n        const div = document.createElement('div');\n\n        div.className = 'modal fade';\n        div.innerHTML = html;\n\n        document.body.append(div);\n\n        div.querySelector('.import-btn').onclick = onImport;\n\n        setExampleFileURL(div);\n\n        modal = Modal.getOrCreateInstance(div);\n\n    }\n\n    function setExampleFileURL(div) {\n\n        const hyLinks = div.querySelectorAll('.example-file');\n\n        for (const link of hyLinks) {\n\n            link.href = EXAMPLE_FILES_DIR + link.id;\n            link.target = \"_blank\";\n        }\n\n    }\n\n    async function onImport() {\n\n        const { loadLocalFile } = await import('./file-loader');\n\n        loadLocalFile(modal._element.querySelector('#localIIIFManifestFile'));\n\n    }\n\n    function show(callback) {\n\n        if (!modal) {\n            creat();\n        }\n\n        gCallback = callback;\n\n        modal.show();\n\n    }\n\n    function hide() {\n\n        if (modal) {\n            modal.hide();\n        }\n\n    }\n\n    return {\n        show,\n        hide,\n    }\n\n}();\n\nexport { LocalFileModal };\n"],"names":["EXAMPLE_FILES_DIR","Constants","Modal","BootstrapWrap","LocalFileModal","modal","creat","div","document","createElement","className","innerHTML","body","append","querySelector","onclick","onImport","querySelectorAll","link","href","id","target","setExampleFileURL","getOrCreateInstance","loadLocalFile","_element","show","callback","hide"],"sourceRoot":""}